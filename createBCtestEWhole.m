function [mkImages, mkDataSetFolders] = createBCtestE(dataFolderTmpl, dataFolderSfx, readFcn)

%% Create a real folder
dataFolder = strrep(dataFolderTmpl, 'Sfx', dataFolderSfx);


%% Create vectors of the makeup folder templates and category labels

% Empty vectors
mkDataSetFolders = strings(0);
mkLabels = strings(0);

% Let's populate vectors one by one, making labels from the top directory

mkDataSetFolders = [mkDataSetFolders, 'S1/S1GL1/S1GL1AN'];
[~, n] = size(mkDataSetFolders);
[tmpStr, ~] = strsplit(mkDataSetFolders(n), '/');
mkLabelCur = tmpStr(1,3);
mkLabelCurN = strlength(mkLabelCur);
mkLabelCur = extractBetween(mkLabelCur, mkLabelCurN-1, mkLabelCurN);
mkLabels = [mkLabels, mkLabelCur];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD1/S1HD1AN']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD2/S1HD2AN'];  
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK1/S1MK1AN']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK2/S1MK2AN']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK3/S1MK3AN']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK4/S1MK4AN'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK5/S1MK5AN'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK6/S1MK6AN'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK7/S1MK7AN'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK8/S1MK8AN'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1NM2/S1NM2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S2/S2HD1/S2HD1AN']; 
mkDataSetFolders = [mkDataSetFolders, 'S2/S2GL1/S2GL1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S2/S2NM2/S2NM2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD1/S3HD1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD2/S3HD2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK1/S3MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK2/S3MK2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK3/S3MK3AN'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK4/S3MK4AN'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK5/S3MK5AN'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3NM3/S3NM3AN'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4GL1/S4GL1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4HD1/S4HD1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4MK1/S4MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4NM2/S4NM2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK1/S5MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK2/S5MK2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK3/S5MK3AN'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK4/S5MK4AN'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5NM4/S5NM4AN'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK1/S6MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK2/S6MK2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK1/S7MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK2/S7MK2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK3/S7MK3AN'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD1/S7HD1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD2/S7HD2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM1/S7FM1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM2/S7FM2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM3/S7FM3AN'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7NM4/S7NM4AN'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK2/S10MK2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK1/S10MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK3/S10MK3AN'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK4/S10MK4AN'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10NM2/S10NM2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK2/S11MK2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK1/S11MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11NM3/S11NM3AN'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK2/S12MK2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK1/S12MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12NM2/S12NM2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S13/S13MK1/S13MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14HD1/S14HD1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14GL1/S14GL1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14MK1/S14MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14NM2/S14NM2AN'];
mkDataSetFolders = [mkDataSetFolders, 'S15/S15MK1/S15MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S16/S16MK1/S16MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S17/S17MK1/S17MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S18/S18MK1/S18MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19GL1/S19GL1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19MK1/S19MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S20/S20MK1/S20MK1AN'];
mkDataSetFolders = [mkDataSetFolders, 'S21/S21MK1/S21MK1AN'];
%
mkDataSetFolders = [mkDataSetFolders, 'S1/S1GL1/S1GL1CE'];
[~, n] = size(mkDataSetFolders);
[tmpStr, ~] = strsplit(mkDataSetFolders(n), '/');
mkLabelCur = tmpStr(1,3);
mkLabelCurN = strlength(mkLabelCur);
mkLabelCur = extractBetween(mkLabelCur, mkLabelCurN-1, mkLabelCurN);
mkLabels = [mkLabels, mkLabelCur];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD1/S1HD1CE']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD2/S1HD2CE'];  
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK1/S1MK1CE']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK2/S1MK2CE']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK3/S1MK3CE']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK4/S1MK4CE'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK5/S1MK5CE'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK6/S1MK6CE'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK7/S1MK7CE'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK8/S1MK8CE'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1NM2/S1NM2CE'];
%mkDataSetFolders = [mkDataSetFolders, 'S2/S2HD1/S2HD1CE']; 
%mkDataSetFolders = [mkDataSetFolders, 'S2/S2GL1/S2GL1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S2/S2NM2/S2NM2CE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD1/S3HD1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD2/S3HD2CE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK1/S3MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK2/S3MK2CE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK3/S3MK3CE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK4/S3MK4CE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK5/S3MK5CE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3NM3/S3NM3CE'];
%mkDataSetFolders = [mkDataSetFolders, 'S4/S4GL1/S4GL1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4HD1/S4HD1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4MK1/S4MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4NM2/S4NM2CE'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK1/S5MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK2/S5MK2CE'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK3/S5MK3CE'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK4/S5MK4CE'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5NM4/S5NM4CE'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK1/S6MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK2/S6MK2CE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK1/S7MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK2/S7MK2CE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK3/S7MK3CE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD1/S7HD1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD2/S7HD2CE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM1/S7FM1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM2/S7FM2CE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM3/S7FM3CE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7NM4/S7NM4CE'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK2/S10MK2CE'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK1/S10MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK3/S10MK3CE'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK4/S10MK4CE'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10NM2/S10NM2CE'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK2/S11MK2CE'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK1/S11MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11NM3/S11NM3CE'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK2/S12MK2CE'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK1/S12MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12NM2/S12NM2CE'];
mkDataSetFolders = [mkDataSetFolders, 'S13/S13MK1/S13MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14HD1/S14HD1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14GL1/S14GL1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14MK1/S14MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14NM2/S14NM2CE'];
mkDataSetFolders = [mkDataSetFolders, 'S15/S15MK1/S15MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S16/S16MK1/S16MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S17/S17MK1/S17MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S18/S18MK1/S18MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19GL1/S19GL1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19MK1/S19MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S20/S20MK1/S20MK1CE'];
mkDataSetFolders = [mkDataSetFolders, 'S21/S21MK1/S21MK1CE'];
%
mkDataSetFolders = [mkDataSetFolders, 'S1/S1GL1/S1GL1DS'];
[~, n] = size(mkDataSetFolders);
[tmpStr, ~] = strsplit(mkDataSetFolders(n), '/');
mkLabelCur = tmpStr(1,3);
mkLabelCurN = strlength(mkLabelCur);
mkLabelCur = extractBetween(mkLabelCur, mkLabelCurN-1, mkLabelCurN);
mkLabels = [mkLabels, mkLabelCur];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD1/S1HD1DS']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD2/S1HD2DS'];  
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK1/S1MK1DS']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK2/S1MK2DS']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK3/S1MK3DS']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK4/S1MK4DS'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK5/S1MK5DS'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK6/S1MK6DS'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK7/S1MK7DS'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK8/S1MK8DS'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1NM2/S1NM2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S2/S2HD1/S2HD1DS']; 
mkDataSetFolders = [mkDataSetFolders, 'S2/S2GL1/S2GL1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S2/S2NM2/S2NM2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD1/S3HD1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD2/S3HD2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK1/S3MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK2/S3MK2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK3/S3MK3DS'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK4/S3MK4DS'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK5/S3MK5DS'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3NM3/S3NM3DS'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4GL1/S4GL1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4HD1/S4HD1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4MK1/S4MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4NM2/S4NM2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK1/S5MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK2/S5MK2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK3/S5MK3DS'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK4/S5MK4DS'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5NM4/S5NM4DS'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK1/S6MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK2/S6MK2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK1/S7MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK2/S7MK2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK3/S7MK3DS'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD1/S7HD1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD2/S7HD2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM1/S7FM1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM2/S7FM2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM3/S7FM3DS'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7NM4/S7NM4DS'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK2/S10MK2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK1/S10MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK3/S10MK3DS'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK4/S10MK4DS'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10NM2/S10NM2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK2/S11MK2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK1/S11MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11NM3/S11NM3DS'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK2/S12MK2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK1/S12MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12NM2/S12NM2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S13/S13MK1/S13MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14HD1/S14HD1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14GL1/S14GL1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14MK1/S14MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14NM2/S14NM2DS'];
mkDataSetFolders = [mkDataSetFolders, 'S15/S15MK1/S15MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S16/S16MK1/S16MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S17/S17MK1/S17MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S18/S18MK1/S18MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19GL1/S19GL1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19MK1/S19MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S20/S20MK1/S20MK1DS'];
mkDataSetFolders = [mkDataSetFolders, 'S21/S21MK1/S21MK1DS'];
%
mkDataSetFolders = [mkDataSetFolders, 'S1/S1GL1/S1GL1HP'];
[~, n] = size(mkDataSetFolders);
[tmpStr, ~] = strsplit(mkDataSetFolders(n), '/');
mkLabelCur = tmpStr(1,3);
mkLabelCurN = strlength(mkLabelCur);
mkLabelCur = extractBetween(mkLabelCur, mkLabelCurN-1, mkLabelCurN);
mkLabels = [mkLabels, mkLabelCur];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD1/S1HD1HP']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD2/S1HD2HP'];  
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK1/S1MK1HP']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK2/S1MK2HP']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK3/S1MK3HP']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK4/S1MK4HP'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK5/S1MK5HP'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK6/S1MK6HP'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK7/S1MK7HP'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK8/S1MK8HP'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1NM2/S1NM2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S2/S2HD1/S2HD1HP']; 
mkDataSetFolders = [mkDataSetFolders, 'S2/S2GL1/S2GL1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S2/S2NM2/S2NM2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD1/S3HD1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD2/S3HD2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK1/S3MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK2/S3MK2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK3/S3MK3HP'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK4/S3MK4HP'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK5/S3MK5HP'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3NM3/S3NM3HP'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4GL1/S4GL1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4HD1/S4HD1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4MK1/S4MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4NM2/S4NM2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK1/S5MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK2/S5MK2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK3/S5MK3HP'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK4/S5MK4HP'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5NM4/S5NM4HP'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK1/S6MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK2/S6MK2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK1/S7MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK2/S7MK2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK3/S7MK3HP'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD1/S7HD1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD2/S7HD2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM1/S7FM1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM2/S7FM2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM3/S7FM3HP'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7NM4/S7NM4HP'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK2/S10MK2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK1/S10MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK3/S10MK3HP'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK4/S10MK4HP'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10NM2/S10NM2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK2/S11MK2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK1/S11MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11NM3/S11NM3HP'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK2/S12MK2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK1/S12MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12NM2/S12NM2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S13/S13MK1/S13MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14HD1/S14HD1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14GL1/S14GL1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14MK1/S14MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14NM2/S14NM2HP'];
mkDataSetFolders = [mkDataSetFolders, 'S15/S15MK1/S15MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S16/S16MK1/S16MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S17/S17MK1/S17MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S18/S18MK1/S18MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19GL1/S19GL1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19MK1/S19MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S20/S20MK1/S20MK1HP'];
mkDataSetFolders = [mkDataSetFolders, 'S21/S21MK1/S21MK1HP'];
%
mkDataSetFolders = [mkDataSetFolders, 'S1/S1GL1/S1GL1NE'];
[~, n] = size(mkDataSetFolders);
[tmpStr, ~] = strsplit(mkDataSetFolders(n), '/');
mkLabelCur = tmpStr(1,3);
mkLabelCurN = strlength(mkLabelCur);
mkLabelCur = extractBetween(mkLabelCur, mkLabelCurN-1, mkLabelCurN);
mkLabels = [mkLabels, mkLabelCur];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD1/S1HD1NE']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD2/S1HD2NE'];  
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK1/S1MK1NE']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK2/S1MK2NE']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK3/S1MK3NE']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK4/S1MK4NE'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK5/S1MK5NE'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK6/S1MK6NE'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK7/S1MK7NE'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK8/S1MK8NE'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1NM2/S1NM2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S2/S2HD1/S2HD1NE']; 
mkDataSetFolders = [mkDataSetFolders, 'S2/S2GL1/S2GL1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S2/S2NM2/S2NM2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD1/S3HD1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD2/S3HD2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK1/S3MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK2/S3MK2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK3/S3MK3NE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK4/S3MK4NE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK5/S3MK5NE'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3NM3/S3NM3NE'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4GL1/S4GL1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4HD1/S4HD1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4MK1/S4MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4NM2/S4NM2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK1/S5MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK2/S5MK2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK3/S5MK3NE'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK4/S5MK4NE'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5NM4/S5NM4NE'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK1/S6MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK2/S6MK2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK1/S7MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK2/S7MK2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK3/S7MK3NE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD1/S7HD1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD2/S7HD2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM1/S7FM1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM2/S7FM2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM3/S7FM3NE'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7NM4/S7NM4NE'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK2/S10MK2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK1/S10MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK3/S10MK3NE'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK4/S10MK4NE'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10NM2/S10NM2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK2/S11MK2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK1/S11MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11NM3/S11NM3NE'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK2/S12MK2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK1/S12MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12NM2/S12NM2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S13/S13MK1/S13MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14HD1/S14HD1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14GL1/S14GL1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14MK1/S14MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14NM2/S14NM2NE'];
mkDataSetFolders = [mkDataSetFolders, 'S15/S15MK1/S15MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S16/S16MK1/S16MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S17/S17MK1/S17MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S18/S18MK1/S18MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19GL1/S19GL1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19MK1/S19MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S20/S20MK1/S20MK1NE'];
mkDataSetFolders = [mkDataSetFolders, 'S21/S21MK1/S21MK1NE'];
%
mkDataSetFolders = [mkDataSetFolders, 'S1/S1GL1/S1GL1SA'];
[~, n] = size(mkDataSetFolders);
[tmpStr, ~] = strsplit(mkDataSetFolders(n), '/');
mkLabelCur = tmpStr(1,3);
mkLabelCurN = strlength(mkLabelCur);
mkLabelCur = extractBetween(mkLabelCur, mkLabelCurN-1, mkLabelCurN);
mkLabels = [mkLabels, mkLabelCur];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD1/S1HD1SA']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD2/S1HD2SA'];  
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK1/S1MK1SA']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK2/S1MK2SA']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK3/S1MK3SA']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK4/S1MK4SA'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK5/S1MK5SA'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK6/S1MK6SA'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK7/S1MK7SA'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK8/S1MK8SA'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1NM2/S1NM2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S2/S2HD1/S2HD1SA']; 
mkDataSetFolders = [mkDataSetFolders, 'S2/S2GL1/S2GL1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S2/S2NM2/S2NM2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD1/S3HD1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD2/S3HD2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK1/S3MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK2/S3MK2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK3/S3MK3SA'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK4/S3MK4SA'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK5/S3MK5SA'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3NM3/S3NM3SA'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4GL1/S4GL1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4HD1/S4HD1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4MK1/S4MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4NM2/S4NM2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK1/S5MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK2/S5MK2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK3/S5MK3SA'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK4/S5MK4SA'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5NM4/S5NM4SA'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK1/S6MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK2/S6MK2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK1/S7MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK2/S7MK2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK3/S7MK3SA'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD1/S7HD1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD2/S7HD2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM1/S7FM1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM2/S7FM2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM3/S7FM3SA'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7NM4/S7NM4SA'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK2/S10MK2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK1/S10MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK3/S10MK3SA'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK4/S10MK4SA'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10NM2/S10NM2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK2/S11MK2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK1/S11MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11NM3/S11NM3SA'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK2/S12MK2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK1/S12MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12NM2/S12NM2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S13/S13MK1/S13MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14HD1/S14HD1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14GL1/S14GL1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14MK1/S14MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14NM2/S14NM2SA'];
mkDataSetFolders = [mkDataSetFolders, 'S15/S15MK1/S15MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S16/S16MK1/S16MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S17/S17MK1/S17MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S18/S18MK1/S18MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19GL1/S19GL1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19MK1/S19MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S20/S20MK1/S20MK1SA'];
mkDataSetFolders = [mkDataSetFolders, 'S21/S21MK1/S21MK1SA'];
%
mkDataSetFolders = [mkDataSetFolders, 'S1/S1GL1/S1GL1SC'];
[~, n] = size(mkDataSetFolders);
[tmpStr, ~] = strsplit(mkDataSetFolders(n), '/');
mkLabelCur = tmpStr(1,3);
mkLabelCurN = strlength(mkLabelCur);
mkLabelCur = extractBetween(mkLabelCur, mkLabelCurN-1, mkLabelCurN);
mkLabels = [mkLabels, mkLabelCur];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD1/S1HD1SC']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD2/S1HD2SC'];  
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK1/S1MK1SC']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK2/S1MK2SC']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK3/S1MK3SC']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK4/S1MK4SC'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK5/S1MK5SC'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK6/S1MK6SC'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK7/S1MK7SC'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK8/S1MK8SC'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1NM2/S1NM2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S2/S2HD1/S2HD1SC']; 
mkDataSetFolders = [mkDataSetFolders, 'S2/S2GL1/S2GL1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S2/S2NM2/S2NM2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD1/S3HD1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD2/S3HD2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK1/S3MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK2/S3MK2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK3/S3MK3SC'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK4/S3MK4SC'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK5/S3MK5SC'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3NM3/S3NM3SC'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4GL1/S4GL1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4HD1/S4HD1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4MK1/S4MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4NM2/S4NM2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK1/S5MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK2/S5MK2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK3/S5MK3SC'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK4/S5MK4SC'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5NM4/S5NM4SC'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK1/S6MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK2/S6MK2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK1/S7MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK2/S7MK2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK3/S7MK3SC'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD1/S7HD1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD2/S7HD2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM1/S7FM1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM2/S7FM2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM3/S7FM3SC'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7NM4/S7NM4SC'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK2/S10MK2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK1/S10MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK3/S10MK3SC'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK4/S10MK4SC'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10NM2/S10NM2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK2/S11MK2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK1/S11MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11NM3/S11NM3SC'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK2/S12MK2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK1/S12MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12NM2/S12NM2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S13/S13MK1/S13MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14HD1/S14HD1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14GL1/S14GL1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14MK1/S14MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14NM2/S14NM2SC'];
mkDataSetFolders = [mkDataSetFolders, 'S15/S15MK1/S15MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S16/S16MK1/S16MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S17/S17MK1/S17MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S18/S18MK1/S18MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19GL1/S19GL1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19MK1/S19MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S20/S20MK1/S20MK1SC'];
mkDataSetFolders = [mkDataSetFolders, 'S21/S21MK1/S21MK1SC'];
%
mkDataSetFolders = [mkDataSetFolders, 'S1/S1GL1/S1GL1SR'];
[~, n] = size(mkDataSetFolders);
[tmpStr, ~] = strsplit(mkDataSetFolders(n), '/');
mkLabelCur = tmpStr(1,3);
mkLabelCurN = strlength(mkLabelCur);
mkLabelCur = extractBetween(mkLabelCur, mkLabelCurN-1, mkLabelCurN);
mkLabels = [mkLabels, mkLabelCur];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD1/S1HD1SR']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1HD2/S1HD2SR'];  
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK1/S1MK1SR']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK2/S1MK2SR']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK3/S1MK3SR']; 
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK4/S1MK4SR'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK5/S1MK5SR'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK6/S1MK6SR'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK7/S1MK7SR'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1MK8/S1MK8SR'];
mkDataSetFolders = [mkDataSetFolders, 'S1/S1NM2/S1NM2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S2/S2HD1/S2HD1SR']; 
mkDataSetFolders = [mkDataSetFolders, 'S2/S2GL1/S2GL1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S2/S2NM2/S2NM2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD1/S3HD1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3HD2/S3HD2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK1/S3MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK2/S3MK2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK3/S3MK3SR'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK4/S3MK4SR'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3MK5/S3MK5SR'];
mkDataSetFolders = [mkDataSetFolders, 'S3/S3NM3/S3NM3SR'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4GL1/S4GL1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4HD1/S4HD1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4MK1/S4MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S4/S4NM2/S4NM2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK1/S5MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK2/S5MK2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK3/S5MK3SR'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5MK4/S5MK4SR'];
mkDataSetFolders = [mkDataSetFolders, 'S5/S5NM4/S5NM4SR'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK1/S6MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S6/S6MK2/S6MK2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK1/S7MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK2/S7MK2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7MK3/S7MK3SR'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD1/S7HD1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7HD2/S7HD2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM1/S7FM1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM2/S7FM2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7FM3/S7FM3SR'];
mkDataSetFolders = [mkDataSetFolders, 'S7/S7NM4/S7NM4SR'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK2/S10MK2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK1/S10MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK3/S10MK3SR'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10MK4/S10MK4SR'];
mkDataSetFolders = [mkDataSetFolders, 'S10/S10NM2/S10NM2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK2/S11MK2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11MK1/S11MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S11/S11NM3/S11NM3SR'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK2/S12MK2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12MK1/S12MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S12/S12NM2/S12NM2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S13/S13MK1/S13MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14HD1/S14HD1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14GL1/S14GL1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14MK1/S14MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S14/S14NM2/S14NM2SR'];
mkDataSetFolders = [mkDataSetFolders, 'S15/S15MK1/S15MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S16/S16MK1/S16MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S17/S17MK1/S17MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S18/S18MK1/S18MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19GL1/S19GL1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S19/S19MK1/S19MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S20/S20MK1/S20MK1SR'];
mkDataSetFolders = [mkDataSetFolders, 'S21/S21MK1/S21MK1SR'];



%% Replace Sfx template with the actual value of the image dimensions
mkDataSetFolders = strrep(mkDataSetFolders, 'Sfx', dataFolderSfx);
mkLabels = strrep(mkLabels, 'Sfx', dataFolderSfx);

% Build a full path  
mkDataSetFullFolders = fullfile(dataFolder, mkDataSetFolders);


%% Create a vector of the makeup iamges Datastores with top folder lables

[~, nMakeups] = size(mkDataSetFolders);
mkImages = cell(1,1);
[~, nLabels] = size(mkLabels);
%mkImages = cell(nLabels, 1);

fprintf("Labeling test set:\n");

%%
for i=1:nMakeups
    %fprintf(" %s,", mkDataSetFolders(i));
    
for j=1:nLabels
    
    %fprintf(" %s,", mkLabels(j));
    
    mkDataSetFullFoldersCur = mkDataSetFullFolders(i); 
    matches = contains(mkDataSetFullFoldersCur, mkLabels(j));
    
    if matches > 0
        mkDataSetFullFoldersLabel = mkDataSetFullFoldersCur(matches); 
    
        % Create Datastore for each label
        mkImage = imageDatastore(mkDataSetFullFoldersLabel, 'IncludeSubfolders', false,...
                                'LabelSource', 'none');
        mkImage.ReadFcn = readFcn;
       
        % Label all images in the Datastore with the top folder label                       
        [n, ~] = size(mkImage.Files);  
        tmpStr = strings(n,1);
        tmpStr(:) = mkLabels(j);
        mkImage.Labels = categorical(tmpStr); 
                            
        %countEachLabel(mkImage)    
    
        if i == 1
            mkImages{i} = mkImage;
        else
            mkCombined = imageDatastore(cat(1, mkImages{1}.Files, mkImage.Files)); 
            mkCombined.Labels = cat(1, mkImages{1}.Labels, mkImage.Labels);
            mkCombined.ReadFcn = readFcn;

            mkImages{1} = mkCombined; 
        end
    end
    
end
%fprintf("\n"); 
end
%fprintf("\n");

mkImages{1} = shuffle(mkImages{1});
    

end

